# Hawkeye 零输入傻瓜式体验设计

**版本**: 1.0
**最后更新**: 2026-01-20
**目标**: 用户安装后无需任何配置，Hawkeye 自动工作

---

## 核心理念

> **"安装即运行，观察即建议，一键即执行"**

用户不需要：
- ❌ 配置 API Key
- ❌ 设置监控路径
- ❌ 学习任何操作
- ❌ 输入任何指令
- ❌ 理解技术概念

用户只需要：
- ✅ 安装
- ✅ 看建议
- ✅ 点确认或忽略

---

## 1. 安装即运行 (Zero-Config Startup)

### 1.1 自动检测与配置

```typescript
interface AutoConfigSystem {
  // 启动时自动执行
  async onFirstLaunch(): Promise<void> {
    // 1. 检测系统环境
    const env = await this.detectEnvironment();

    // 2. 智能选择 AI 后端
    const aiBackend = await this.selectAIBackend();

    // 3. 设置默认监控路径
    const watchPaths = this.getDefaultWatchPaths(env);

    // 4. 启动感知服务
    await this.startPerception();

    // 5. 开始静默工作
    // 用户无需做任何事
  }

  // 智能 AI 后端选择
  async selectAIBackend(): Promise<AIBackend> {
    // 优先级：
    // 1. 检测本地 Ollama (免费、隐私)
    if (await this.detectOllama()) {
      return { type: 'ollama', model: 'llama3.2' };
    }

    // 2. 使用内置轻量模型 (离线可用)
    if (await this.hasBuiltinModel()) {
      return { type: 'builtin', model: 'hawkeye-tiny' };
    }

    // 3. 使用免费云端额度 (新用户福利)
    return { type: 'cloud', model: 'hawkeye-free-tier' };
  }
}
```

### 1.2 默认监控路径 (自动检测)

| 平台 | 自动监控路径 | 说明 |
|------|-------------|------|
| **所有平台** | `~/Desktop` | 桌面文件 |
| **所有平台** | `~/Downloads` | 下载文件 |
| **所有平台** | `~/Documents` | 文档 |
| **macOS** | `~/Library/Application Support/Code/User` | VS Code 配置 |
| **Windows** | `%APPDATA%\Code\User` | VS Code 配置 |
| **Linux** | `~/.config/Code/User` | VS Code 配置 |

### 1.3 自动权限申请

```typescript
// 首次启动时，根据需要逐步申请权限
// 不一次性吓到用户
const permissionFlow = {
  immediate: [
    'clipboard',      // 剪贴板 - 核心功能
  ],
  onFirstUse: [
    'screen_capture', // 屏幕截图 - 用户首次使用相关功能时
    'file_access',    // 文件访问 - 用户首次使用文件整理时
    'accessibility',  // 辅助功能 - 用户首次使用窗口感知时
  ],
  optional: [
    'calendar',       // 日历 - 会议相关功能
    'contacts',       // 联系人 - 沟通相关功能
  ]
};
```

---

## 2. 智能感知触发 (Smart Triggers)

### 2.1 被动感知 (用户无感)

Hawkeye 在后台静默运行，自动感知：

| 触发事件 | 自动响应 | 用户感知 |
|---------|---------|---------|
| 复制错误信息 | 分析错误，准备解决方案 | 弹出小提示 |
| 下载新文件 | 识别文件类型，建议归档位置 | 弹出小提示 |
| 打开 IDE | 检测项目，恢复上下文 | 弹出小提示 |
| 长时间停留在错误页面 | 分析问题，准备帮助 | 弹出小提示 |
| 重复操作 3 次以上 | 识别模式，建议自动化 | 弹出小提示 |

### 2.2 智能建议气泡 (Non-Intrusive)

```
┌─────────────────────────────────────────┐
│  🦅 Hawkeye                          ✕  │
├─────────────────────────────────────────┤
│                                         │
│  检测到错误信息，需要帮你解决吗？        │
│                                         │
│  ┌─────────────────────────────────┐    │
│  │ TypeError: Cannot read property │    │
│  │ 'map' of undefined              │    │
│  └─────────────────────────────────┘    │
│                                         │
│     [ 忽略 ]        [ 🔍 查看方案 ]     │
│                                         │
└─────────────────────────────────────────┘
```

**设计原则**：
- 右下角小气泡，不打断工作流
- 5 秒后自动收起（可在托盘找到）
- 连续忽略 3 次同类建议后降低频率
- 学习用户偏好，减少无用打扰

---

## 3. 一键执行 (One-Click Execution)

### 3.1 方案展示界面

当用户点击"查看方案"时：

```
┌──────────────────────────────────────────────────────────┐
│  🦅 解决方案                                          ✕  │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  问题: TypeError: Cannot read property 'map' of undefined│
│                                                          │
│  ───────────────────────────────────────────────────────│
│                                                          │
│  ✅ 推荐方案: 添加空值检查                               │
│                                                          │
│  将 data.map(...) 改为 data?.map(...) || []            │
│                                                          │
│  优点:                                                   │
│  • 简单直接                                              │
│  • 不影响其他代码                                        │
│                                                          │
│  缺点:                                                   │
│  • 可能隐藏数据为空的真正问题                            │
│                                                          │
│  ───────────────────────────────────────────────────────│
│                                                          │
│  📍 位置: src/components/UserList.tsx:42                 │
│                                                          │
│      [ 稍后处理 ]         [ ✅ 应用修复 ]               │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 3.2 执行确认 (简化版)

对于**安全操作**，一键直接执行：
- 复制代码到剪贴板
- 打开相关文件
- 跳转到指定行

对于**需要确认的操作**，显示简单确认：

```
┌───────────────────────────────────┐
│  确认修改文件？                    │
│                                   │
│  📄 src/components/UserList.tsx   │
│  📝 第 42 行添加空值检查          │
│                                   │
│  [ 取消 ]      [ ✅ 确认修改 ]    │
└───────────────────────────────────┘
```

---

## 4. 零配置功能清单

### 4.1 开箱即用功能

| 功能 | 默认状态 | 自动触发条件 |
|------|---------|-------------|
| **错误诊断** | ✅ 开启 | 复制错误信息 |
| **文件整理建议** | ✅ 开启 | 下载新文件 |
| **上下文恢复** | ✅ 开启 | 打开开发工具 |
| **剪贴板历史** | ✅ 开启 | 随时可查看 |
| **重复操作检测** | ✅ 开启 | 相同操作 3 次 |
| **屏幕截图分析** | ⚠️ 需权限 | 用户主动截图 |

### 4.2 智能默认值

```typescript
const SMART_DEFAULTS = {
  // 建议频率 - 不要太烦人
  suggestion: {
    maxPerHour: 5,                    // 每小时最多 5 个建议
    cooldownAfterReject: 30 * 60_000, // 拒绝后 30 分钟冷却
    autoHideDelay: 5000,              // 5 秒后自动隐藏
  },

  // 感知配置 - 平衡性能和功能
  perception: {
    clipboardCheckInterval: 500,      // 剪贴板检查间隔
    screenCaptureEnabled: false,      // 默认关闭屏幕截图(隐私)
    fileWatchDebounce: 1000,          // 文件变化防抖
  },

  // 隐私设置 - 默认最严格
  privacy: {
    storeScreenshots: false,          // 不存储截图
    anonymizeData: true,              // 匿名化数据
    localProcessingOnly: true,        // 仅本地处理
  },

  // 执行配置 - 安全第一
  execution: {
    requireConfirmation: true,        // 需要确认
    autoApproveReadOnly: true,        // 只读操作自动批准
    maxAutoRetries: 0,                // 不自动重试
  },
};
```

---

## 5. 渐进式功能发现

### 5.1 功能解锁机制

不要一开始就展示所有功能，让用户逐步发现：

```
┌─────────────────────────────────────────────────────────┐
│  🎉 解锁新功能！                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  你已经使用 Hawkeye 处理了 10 个错误！                  │
│                                                         │
│  新功能解锁:                                            │
│  🔓 自动化工作流 - 让 Hawkeye 帮你自动处理重复任务      │
│                                                         │
│            [ 稍后了解 ]     [ 立即体验 ]                │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5.2 使用里程碑

| 里程碑 | 解锁功能 |
|-------|---------|
| 安装完成 | 错误诊断、文件整理建议 |
| 使用 3 天 | 上下文恢复、剪贴板历史 |
| 处理 10 个建议 | 习惯学习、个性化建议 |
| 使用 7 天 | 自动化工作流、快捷操作 |
| 使用 30 天 | 高级设置、自定义规则 |

---

## 6. 极简托盘菜单

### 6.1 托盘图标状态

| 图标 | 状态 | 说明 |
|------|------|------|
| 🦅 | 正常运行 | 静默监控中 |
| 🦅💡 | 有建议 | 有待处理的建议 |
| 🦅⏸️ | 已暂停 | 用户主动暂停 |
| 🦅❌ | 有问题 | 需要处理的错误 |

### 6.2 右键菜单 (极简)

```
┌─────────────────────────┐
│  🦅 Hawkeye 运行中      │
├─────────────────────────┤
│  📋 查看建议 (2)        │
│  📜 历史记录            │
├─────────────────────────┤
│  ⏸️ 暂停 1 小时         │
│  ⚙️ 偏好设置            │
├─────────────────────────┤
│  ❌ 退出                 │
└─────────────────────────┘
```

---

## 7. 偏好设置 (极简版)

### 7.1 设置界面

只展示最核心的 3 个开关：

```
┌──────────────────────────────────────────────────────────┐
│  ⚙️ Hawkeye 偏好设置                                    │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  基础设置                                                │
│  ─────────────────────────────────────────────────────  │
│                                                          │
│  🚀 开机自动启动                           [ ✅ 开启 ]  │
│                                                          │
│  💡 显示建议通知                           [ ✅ 开启 ]  │
│                                                          │
│  🔒 仅本地处理 (更隐私)                    [ ✅ 开启 ]  │
│                                                          │
│  ─────────────────────────────────────────────────────  │
│                                                          │
│  [ 高级设置... ]                                         │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 7.2 高级设置 (隐藏)

只有点击"高级设置"才会展开更多选项，避免吓到普通用户。

---

## 8. 错误处理 (静默)

### 8.1 自动恢复

```typescript
const errorRecovery = {
  // AI 后端不可用
  aiBackendUnavailable: async () => {
    // 1. 尝试切换到备用后端
    // 2. 如果都不行，降级到离线模式
    // 3. 静默通知用户（托盘图标变化）
    // 4. 不弹窗打扰
  },

  // 权限被拒绝
  permissionDenied: async (permission: string) => {
    // 1. 禁用相关功能
    // 2. 下次使用时再次请求
    // 3. 不反复骚扰
  },

  // 网络错误
  networkError: async () => {
    // 1. 自动切换到离线模式
    // 2. 网络恢复后自动切回
    // 3. 用户完全无感
  },
};
```

### 8.2 用户可见的错误

只有以下情况才会通知用户：

1. ❌ 核心功能完全不可用
2. ❌ 需要用户手动修复的问题
3. ❌ 数据可能丢失

其他所有错误都静默处理，记录日志，自动恢复。

---

## 9. 数据安全 (默认最严格)

### 9.1 隐私默认配置

```typescript
const PRIVACY_DEFAULTS = {
  // 不存储敏感数据
  storage: {
    storePasswords: false,            // 永不存储密码
    storeFinancialData: false,        // 永不存储财务数据
    storeScreenshots: false,          // 默认不存储截图
    dataRetentionDays: 7,             // 7 天自动清理
  },

  // 不发送数据到云端
  network: {
    sendTelemetry: false,             // 默认不发送遥测
    sendCrashReports: false,          // 默认不发送崩溃报告
    cloudSync: false,                 // 默认不云同步
  },

  // 内容过滤
  filtering: {
    ignorePrivateBrowsing: true,      // 忽略隐私浏览模式
    ignorePasswordFields: true,       // 忽略密码输入框
    ignoreBankingSites: true,         // 忽略银行网站
  },
};
```

### 9.2 自动检测敏感内容

```typescript
// 自动跳过敏感内容
const sensitivePatterns = [
  /password/i,
  /secret/i,
  /api[_-]?key/i,
  /credit[_-]?card/i,
  /ssn|social[_-]?security/i,
  /bank[_-]?account/i,
];
```

---

## 10. PRD 需要补充的内容

基于"零输入"理念，PRD 需要添加：

### 10.1 新增章节: 零输入体验设计

```markdown
## 17. 零输入用户体验设计

### 17.1 设计原则
- 安装即运行，无需配置
- 建议而非强制，用户主导
- 静默失败，自动恢复
- 渐进式功能发现

### 17.2 自动配置系统
[详见本文档]

### 17.3 智能默认值
[详见本文档]
```

### 10.2 修改现有章节

| 章节 | 修改内容 |
|-----|---------|
| 4.2 感知层 | 添加"自动权限申请流程" |
| 4.3 推理层 | 添加"建议频率控制" |
| 4.4 执行层 | 添加"安全操作自动批准" |
| 5. 存储架构 | 添加"自动数据清理" |
| 6. 行为追踪 | 添加"隐私过滤规则" |
| 9. 执行引擎 | 添加"一键执行简化流程" |

### 10.3 新增用户场景

```markdown
### 场景 6: 完全零输入体验

[安装] 用户下载并安装 Hawkeye
[启动] Hawkeye 自动启动，静默运行
[触发] 用户复制了一段错误代码
[建议] 右下角弹出小气泡："检测到错误，需要帮助吗？"
[查看] 用户点击气泡，看到解决方案
[执行] 用户点击"应用修复"
[完成] 文件自动修改，问题解决

整个过程用户没有：
- 输入任何命令
- 配置任何选项
- 理解任何技术概念
```

---

## 总结

**Hawkeye 零输入体验的核心**:

1. **安装即工作** - 自动检测环境，智能选择配置
2. **感知即建议** - 被动监控，主动建议，不打扰
3. **一键即执行** - 方案展示清晰，执行简单安全
4. **错误即恢复** - 静默处理问题，用户无感
5. **隐私即默认** - 最严格的隐私设置作为默认

这样，用户只需要：**安装 → 工作 → 看到建议 → 点确认**

不需要学习任何东西，真正的"傻瓜式"体验。
